<!doctype html>
<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-C5MPB2T6KH"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-C5MPB2T6KH');
	</script>
<!-- for optimal display on high DPI devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.min.css" />
	<style>
body {
	margin: 0px;
}
input {
	display: none;
}
label {
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 1vh;
	border: solid white;
	background: rgba(135, 206, 235, .6);
}
input:checked + label {
	background: yellow;
}
.flagImage {
	height: 5vh;
	object-fit: contain;
}
#flags {
	display: flex;
	width: 100vw;
	justify-content: center;
	z-index: 1;
	position: absolute;
}
#viewer {
}
	</style>
</head>

<!-- the viewer container must have a defined size -->
<div id="flags">
	<input type="radio" name="country" id="button_usa" value="us" checked/>
		<label for="button_usa">
			<img src="img/us.png" class="flagImage"/>the U.S.A.
		</label>
	</input>
	<input type="radio" name="country" id="button_brazil" value="br"/>
	<label for="button_brazil">
		<img src="./img/br.png" class="flagImage"/>Brazil
	</label>
	<input type="radio" name="country" id="button_gb" value="gb"/>
	<label for="button_gb">
		<img src="./img/gb.png" class="flagImage"/>the U.K.
	</label>
	<input type="radio" name="country" id="button_france" value="fr"/>
	<label for="button_france">
		<img src="./img/fr.png" class="flagImage"/>France
	</label>
	<input type="radio" name="country" id="button_germany" value="de"/>
	<label for="button_germany">
		<img src="./img/de.png" class="flagImage"/>Germany
	</label>
	<input type="radio" name="country" id="button_italy" value="it"/>
	<label for="button_italy">
		<img src="./img/it.png" class="flagImage"/>Italy
	</label>
	<input type="radio" name="country" id="button_japan" value="jp"/>
	<label for="button_japan">
			<img src="img/jp.png" class="flagImage"/>Japan
	</label>
	<input type="radio" name="country" id="button_korea" value="kr"/>
	<label for="button_korea">
		<img src="./img/kr.png" class="flagImage"/>Korea
	</label>
	<input type="radio" name="country" id="button_china" value="cn"/>
	<label for="button_china">
		<img src="./img/cn.png" class="flagImage"/>China
	</label>
	<input type="radio" name="country" id="button_india" value="in"/>
	<label for="button_india">
		<img src="./img/in.png" class="flagImage"/>India
	</label>
	<input type="radio" name="country" id="button_switzerland" value="ch"/>
	<label for="button_switzerland">
		<img src="./img/ch.png" class="flagImage"/>Switzerland
	</label>
	<input type="radio" name="country" id="button_australia" value="au"/>
	<label for="button_australia">
		<img src="./img/au.png" class="flagImage"/>Australia
	</label>
	<input type="radio" name="country" id="button_egypt" value="eg"/>
	<label for="button_egypt">
		<img src="./img/eg.png" class="flagImage"/>Egypt
	</label>
	<input type="radio" name="country" id="button_kenya" value="ke"/>
	<label for="button_kenya">
		<img src="./img/ke.png" class="flagImage"/>Kenya
	</label>
</div>
<div id="viewer" style="width: 100vw; height: 100vh;" class="viewer"></div>

<script type="importmap">
{
	"imports": {
		"three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js",
			"@photo-sphere-viewer/core": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.module.js"
	}
}
</script>

<script type="module">
import { Viewer } from '@photo-sphere-viewer/core';
const viewer = new Viewer({
	container: document.querySelector('#viewer'),
	panorama: 'img/360_us.jpg',
	navbar: [
		"zoomRange"
	]
});

let viewers = {};
Array.from(document.getElementsByTagName("input")).forEach(function (b) {
	console.log(b.value);
	b.addEventListener("click", function (ev) {
		console.log(viewer.config);
		if (b.value === "fr") {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": Math.PI*.16, "yaw": Math.PI/2}, "zoom": 30});
		} else if (b.value === "gb") {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": Math.PI*.18, "yaw": 0}, "zoom": 50});
		} else if (b.value === "kr") {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": Math.PI*.25, "yaw": Math.PI*1.45}, "zoom": 50});
		} else {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": 0, "yaw": 0}, "zoom": 70});
		}
	});
});
</script>

