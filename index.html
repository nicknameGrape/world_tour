<!doctype html>
<head>
<!-- for optimal display on high DPI devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.min.css" />
	<style>
body {
	margin: 0px;
}
button {
	background: skyblue;
}
.flagImage {
	width: 5vw;
	height: 10vh;
	object-fit: contain;
}
#flags {
	display: flex;
	width: 100%;
	justify-content: center;
	z-index: 1;
	position: absolute;
}
#viewer {
}
	</style>
</head>

<!-- the viewer container must have a defined size -->
<div id="flags">
	<button id="button_usa" value="us">
		<img src="img/us.png" class="flagImage"/><br>the U.S.A.
	</button>
	<button id="button_brazil" value="br">
		<img src="./img/br.png" class="flagImage"/><br>Brazil
	</button>
	<button id="button_gb" value="gb">
		<img src="./img/gb.png" class="flagImage"/><br>the U.K.
	</button>
	<button id="button_france" value="fr">
		<img src="./img/fr.png" class="flagImage"/><br>France
	</button>
	<button id="button_germany" value="de">
		<img src="./img/de.png" class="flagImage"/><br>Germany
	</button>
	<button id="button_italy" value="it">
		<img src="./img/it.png" class="flagImage"/><br>Italy
	</button>
	<button id="button_japan" value="jp">
		<img src="img/jp.png" class="flagImage"/><br>Japan
	</button>
	<button id="button_korea" value="kr">
		<img src="./img/kr.png" class="flagImage"/><br>Korea
	</button>
	<button id="button_china" value="cn">
		<img src="./img/cn.png" class="flagImage"/><br>China
	</button>
	<button id="button_india" value="in">
		<img src="./img/in.png" class="flagImage"/><br>India
	</button>
	<button id="button_switzerland" value="ch">
		<img src="./img/ch.png" class="flagImage"/><br>Switzerland
	</button>
	<button id="button_australia" value="au">
		<img src="./img/au.png" class="flagImage"/><br>Australia
	</button>
	<button id="button_egypt" value="eg">
		<img src="./img/eg.png" class="flagImage"/><br>Egypt
	</button>
	<button id="button_kenya" value="ke">
		<img src="./img/ke.png" class="flagImage"/><br>Kenya
	</button>
</div>
<div id="viewer" style="width: 100vw; height: 100vh;" class="viewer"></div>

<script type="importmap">
{
	"imports": {
		"three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js",
			"@photo-sphere-viewer/core": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.module.js"
	}
}
</script>

<script type="module">
import { Viewer } from '@photo-sphere-viewer/core';
const viewer = new Viewer({
	container: document.querySelector('#viewer'),
	panorama: 'img/360_us.jpg',
	navbar: [
		"zoomRange"
	]
});

let viewers = {};
Array.from(document.getElementsByTagName("button")).forEach(function (b) {
	console.log(b.value);
	b.addEventListener("click", function (ev) {
		console.log(viewer.config);
		if (b.value === "fr") {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": Math.PI*.16, "yaw": Math.PI/2}, "zoom": 30});
		} else if (b.value === "gb") {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": Math.PI*.18, "yaw": 0}, "zoom": 50});
		} else if (b.value === "kr") {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": Math.PI*.25, "yaw": Math.PI*1.45}, "zoom": 50});
		} else {
			viewer.setPanorama('img/360_'+b.value+'.jpg', {"position": {"pitch": 0, "yaw": 0}, "zoom": 70});
		}
	});
});
</script>

